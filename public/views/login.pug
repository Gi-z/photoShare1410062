html
	head
		title= title
		
		link(rel="stylesheet", href="https://fonts.googleapis.com/css?family=Montserrat")

		link(rel="stylesheet", href="bower_components/bootstrap/dist/css/bootstrap.min.css")
		link(rel="stylesheet", href="bower_components/jquery-ui/themes/smoothness/jquery-ui.min.css")
		script(src="bower_components/jquery/dist/jquery.min.js")
		script(src="bower_components/jquery-ui/jquery-ui.min.js")
		script(src="bower_components/bootstrap/dist/js/bootstrap.min.js")

		link(rel="stylesheet", href="../css/base.css")
		script(src='bower_components/angular/angular.min.js')
	
		script(src="../js/angular/app.js")
		script(src="../js/services/loginService.js")
		script(src="../js/controllers/loginFormController.js")
	body

	script.
		if ("#{user}")
			var userLoggedIn = { "success": true, "user": "#{user}" };
		else
			var userLoggedIn = { "success": false };
	
	div(id="loginForm", ng-app="loginApp", ng-controller="formController")

		script.
			uLog = userLoggedIn;

		nav(class="navbar navbar-default")
			div(class="container-fluid")
				ul(class="nav navbar-nav")
					li 
						a(href="/home") home
					li(ng-if="userLoggedIn['success']") 
						a(href="/profile") profile
					li 
						a(href="/discover") discover
					li(ng-if="userLoggedIn['success']")
						a(href="/upload") upload
					li(class="active") 
						a(href="/login") login	
					li(ng-if="!userLoggedIn['success']")
						a(href="/register") register

		div(id="test")
			form(id="login_form")
				div(class="form-group form-group-sm")
					span.label Username
					input(type="text", class="form-control", name="username")
				
				div(class="form-group form-group-sm")
					span.label Password
					input(type="password", class="form-control", name="password")

				div(class="form-group form-group-sm")
					input(type="submit", class="btn btn-default", name="login", ng-click="submitForm()")
		
				div(class="alert alert-success", ng-if="successfulLogin")
					strong Success!
					p Redirecting to profile page. 
		
				div(class="alert alert-danger", ng-if="unsuccessfulLogin")
					strong Failed
					p {{logMessage}}	
